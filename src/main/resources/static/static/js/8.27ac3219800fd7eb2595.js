webpackJsonp([8],{"2+p5":function(e,s){},oEPZ:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Xxa5"),n=t.n(a),r=t("D2Ra");function i(e){return function(){var s=e.apply(this,arguments);return new Promise(function(e,t){return function a(n,r){try{var i=s[n](r),o=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var o={name:"forget",data:function(){return{username:"",question:"",answer:"",forgetToken:"",password:"",passwordNew:"",active:0}},mounted:function(){},methods:{next:function(){this.active++},toTwo:function(){var e=this;return i(n.a.mark(function s(){var t,a;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(t=e.username)){s.next=6;break}return s.next=4,Object(r.b)({username:t});case 4:0==(a=s.sent).status?(e.question=a.msg,console.log(a),e.next()):e.message(a.msg,1500,"error");case 6:case"end":return s.stop()}},s,e)}))()},toThree:function(){var e=this;return i(n.a.mark(function s(){var t,a,i,o;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.username,a=e.question,!(i=e.answer)){s.next=8;break}return s.next=4,Object(r.a)({username:t,question:a,answer:i});case 4:0==(o=s.sent).status?(e.forgetToken=o.msg,console.log("-----"),console.log(o),e.next()):e.message(o.msg,1500,"error"),s.next=9;break;case 8:e.message("请输入问题答案",1500,"warning");case 9:case"end":return s.stop()}},s,e)}))()},reset:function(){var e=this;return i(n.a.mark(function s(){var t,a,i,o,c;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.username,a=e.passwordNew,i=e.forgetToken,o=e.password,!a||!o){s.next=17;break}if((c=new FormData).append("username",t),c.append("passwordNew",a),c.append("forgetToken ",i),a!=o){s.next=13;break}return s.next=9,Object(r.j)(c);case 9:0==s.sent.status?(e.forgetToken="",e.active=4):e.message("重置密码失败",1500,"error"),s.next=15;break;case 13:e.message("两次密码不一致",1500,"error"),e.password="";case 15:s.next=18;break;case 17:e.message("请输入完整信息",1500,"warning");case 18:case"end":return s.stop()}},s,e)}))()},message:function(e,s,t){this.$message({message:e,duration:s,type:t})}}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"forget"},[t("div",{staticClass:"nav"},[t("div",{staticClass:"inner"},[t("router-link",{attrs:{to:{name:"main"}}},[t("div",{staticClass:"logo"},[t("span",[e._v("交通管理")])])]),e._v(" "),t("span",{staticClass:"find"},[e._v("重置密码")]),e._v(" "),t("div",{staticClass:"right"},[t("router-link",{attrs:{to:{name:"register"}}},[t("span",[e._v("注 册")])]),e._v(" "),t("router-link",{attrs:{to:{name:"login"}}},[t("span",[e._v("登 录")])])],1)],1)]),e._v(" "),t("div",{staticClass:"findDiv"},[t("div",{staticClass:"find"},[t("el-steps",{attrs:{space:220,active:e.active,"finish-status":"success","align-center":""}},[t("el-step",{attrs:{title:"身份获取"}}),e._v(" "),t("el-step",{attrs:{title:"身份验证"}}),e._v(" "),t("el-step",{attrs:{title:"密码重置"}}),e._v(" "),t("el-step",{attrs:{title:"修改成功"}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}],staticClass:"info"},[t("div",{staticClass:"inputrow"},[t("span",{staticClass:"name"},[e._v("账号：")]),t("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"new-password"},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}})],1),e._v(" "),t("div",{staticClass:"inputrow"},[t("el-button",{on:{click:e.toTwo}},[e._v("下一步")])],1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}],staticClass:"info"},[t("div",{staticClass:"inputrow"},[t("span",{staticClass:"name"},[e._v("密保问题：")]),t("el-input",{attrs:{disabled:""},model:{value:e.question,callback:function(s){e.question=s},expression:"question"}})],1),e._v(" "),t("div",{staticClass:"inputrow"},[t("span",{staticClass:"name"},[e._v("密保答案：")]),t("el-input",{attrs:{placeholder:"请输入问题答案"},model:{value:e.answer,callback:function(s){e.answer=s},expression:"answer"}})],1),e._v(" "),t("div",{staticClass:"inputrow"},[t("el-button",{on:{click:e.toThree}},[e._v("下一步")])],1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}],staticClass:"info"},[t("div",{staticClass:"inputrow"},[t("span",{staticClass:"name"},[e._v("新密码：")]),t("el-input",{attrs:{placeholder:"请输入新密码",autocomplete:"new-password","show-password":""},model:{value:e.passwordNew,callback:function(s){e.passwordNew=s},expression:"passwordNew"}})],1),e._v(" "),t("div",{staticClass:"inputrow"},[t("span",{staticClass:"name"},[e._v("确认密码：")]),t("el-input",{attrs:{placeholder:"请再次输入新密码",autocomplete:"new-password","show-password":""},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),e._v(" "),t("div",{staticClass:"inputrow"},[t("el-button",{on:{click:e.reset}},[e._v("下一步")])],1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:4==e.active,expression:"active == 4"}],staticClass:"info"},[e._m(0),e._v(" "),t("router-link",{attrs:{to:{name:"login"}}},[t("div",{staticClass:"inputrow"},[t("el-button",[e._v("返回登录")])],1)])],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"inputrow"},[s("span",{staticClass:"registerSuccess"},[s("i",{staticClass:"el-icon-success"}),this._v("恭喜您，修改密码成功")])])}]};var u=t("VU/8")(o,c,!1,function(e){t("2+p5")},null,null);s.default=u.exports}});