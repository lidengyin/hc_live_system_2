webpackJsonp([3],{"/v2g":function(t,e){},"0Er0":function(t,e,r){t.exports=r.p+"static/img/logo.da4316a.png"},"23i0":function(t,e,r){"use strict";e.a=function(){return new Promise(function(t,e){if("undefined"!=typeof BMap)return t(BMap),!0;window.onBMapCallback=function(){t(BMap)};var r=document.createElement("script");r.setAttribute(type,"text/javascript"),r.setAttribute("src","https://api.map.baidu.com/api?v=2.0&ak=3s9RVp4wDTnCez3eBX3vjisaSlHyAWxE&s=1&callback=onBMapCallback"),document.body.appendChild(r)})}},QlWu:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),i=r("mtWM"),s=r.n(i),o=r("D2Ra"),c=r("23i0");function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(a,i){try{var s=e[a](i),o=s.value}catch(t){return void r(t)}if(!s.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var u={name:"login",data:function(){return{ruleForm:{password:"",username:""},city:"湛江市",province:"广东省",Weather:{}}},methods:{login:function(){var t=this;return l(a.a.mark(function e(){var r,n,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ruleForm,n=r.password,i=r.username,!n||!i){e.next=8;break}return e.next=4,Object(o.d)({username:i,password:n});case 4:0==(s=e.sent).status?(t.message("登陆成功",1e3,"success"),t.resetForm("ruleForm"),t.$router.replace({name:"more"})):t.message(s.msg,1500,"error"),e.next=9;break;case 8:t.message("账号或密码不能为空",1500,"warning");case 9:case"end":return e.stop()}},e,t)}))()},message:function(t,e,r){this.$message({message:t,duration:e,type:r})},resetForm:function(t){this.$refs[t].resetFields()},getCity:function(){var t=this;Object(c.a)().then(function(e){(new e.Geolocation).getCurrentPosition(function(e){console.log(e),t.city=e.address.city,t.province=e.address.province,t.getTianQi()},function(e){t.getTianQi()},{provider:"baidu"})})},getTianQi:function(){var t=this;return l(a.a.mark(function e(){var r,n,i,o,c,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.city,e.next=3,s.a.get("http://wthrcdn.etouch.cn/weather_mini?city="+t.city);case 3:n=e.sent,console.log(n),n=n.data,t.Weather=n.data.forecast[0]||{},console.log(t.Weather),i=t.province,o=t.Weather,c=new Date,l={city:r,province:i,Weather:o,date:{year:c.getFullYear(),month:c.getMonth(),date:c.getDate()}},localStorage.setItem("HCjiaotongCityWeather",JSON.stringify(l));case 12:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.getCity()}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"loginOut"},[r("div",{staticClass:"loginBlack"}),t._v(" "),r("div",{staticClass:"loginDiv"},[t._m(0),t._v(" "),r("p",{staticClass:"loginTitle"},[t._v("海创交通管理平台")]),t._v(" "),r("div",{staticClass:"login"},[r("div",{staticClass:"rightLogin"},[r("div",{staticClass:"loginInner"},[r("p",{staticClass:"loginP noSelect"},[t._v("欢迎回来")]),t._v(" "),r("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,"label-width":"50px"}},[r("el-form-item",{attrs:{label:"账户",prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-s-custom",autocomplete:"off",placeholder:"请输入账号"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",t._n(e))},expression:"ruleForm.username"}},[t._v("<")])],1),t._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),t._v(" "),r("el-form-item",[r("el-button",{staticStyle:{height:"40px",width:"100%",padding:"0px 10px"},attrs:{type:"primary"},on:{click:function(e){return t.login("ruleForm")}}},[r("span",{staticClass:"loginspan"},[t._v("立即登录")])])],1),t._v(" "),r("p",{staticStyle:{height:"30px","font-size":"14px",margin:"20px 0 0"}},[r("router-link",{staticStyle:{color:"rgb(65,65,65)"},attrs:{to:{name:"forget"},target:"_blank"}},[r("span",{staticStyle:{float:"left","margin-left":"20px",cursor:"pointer"}},[t._v("忘记密码")])]),t._v(" "),r("router-link",{attrs:{to:{name:"register"},target:"_blank"}},[r("span",{staticStyle:{float:"right"}},[t._v("立即注册")])])],1)],1)],1)]),t._v(" "),r("div",{staticClass:"leftImg"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://dss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2300875363,445064071&fm=5",expression:"'https://dss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=2300875363,445064071&fm=5'"}]})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loginLogo"},[e("img",{attrs:{src:r("0Er0"),alt:"图标"}})])}]};var m=r("VU/8")(u,p,!1,function(t){r("/v2g")},null,null);e.default=m.exports}});